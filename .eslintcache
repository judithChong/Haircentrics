[{"C:\\Users\\OGOYI\\Haircentrics\\src\\index.js":"1","C:\\Users\\OGOYI\\Haircentrics\\src\\reportWebVitals.js":"2","C:\\Users\\OGOYI\\Haircentrics\\src\\App.js":"3","C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Hairs.js":"4","C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Navbar.js":"5","C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Newhairs.js":"6"},{"size":480,"mtime":1645619425382,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1645619164806,"results":"9","hashOfConfig":"8"},{"size":4265,"mtime":1652250639439,"results":"10","hashOfConfig":"8"},{"size":1572,"mtime":1652253213911,"results":"11","hashOfConfig":"8"},{"size":996,"mtime":1652252943089,"results":"12","hashOfConfig":"8"},{"size":3266,"mtime":1652161845021,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1f74ndg",{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"18","messages":"19","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"20"},{"filePath":"21","messages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23"},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"C:\\Users\\OGOYI\\Haircentrics\\src\\index.js",[],"C:\\Users\\OGOYI\\Haircentrics\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Haircentrics\\src\\App.js",["29","30","31"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport Haircentrics from  './contract/Haircentrics.abi.json';\r\nimport Hairs from './components/Hairs';\r\nimport Newhairs from './components/Newhairs';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0xFe2bDC4D344B901Be90C3B803DD87419A2fc7387\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [contract, setcontract] = useState(null);\r\n  const [address, setAddress] = useState(null);\r\n  const [kit, setKit] = useState(null);\r\n  const [cUSDBalance, setcUSDBalance] = useState(0);\r\n  const [hairs, setHairs] = useState([]);\r\n\r\n  const connectToWallet = async () => {\r\n    if (window.celo) {\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const user_address = accounts[0];\r\n\r\n        kit.defaultAccount = user_address;\r\n\r\n        await setAddress(user_address);\r\n        await setKit(kit);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      console.log(\"Error Occurred\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    connectToWallet();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (kit && address) {\r\n      getBalance();\r\n     \r\n    }\r\n  }, [kit, address]);\r\n\r\n  useEffect(() => {\r\n    if (contract) {\r\n      getHair();\r\n    }\r\n  }, [contract]);  \r\n\r\n\r\n\r\n  const getBalance = (async () => {\r\n    try {\r\n      const balance = await kit.getTotalBalance(address);\r\n      const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n      const contract = new kit.web3.eth.Contract(Haircentrics, contractAddress);\r\n      setcontract(contract);\r\n      setcUSDBalance(USDBalance);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n\r\n  const buyHair = async (_index,) => {\r\n    try {\r\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\r\n    \r\n      \r\n      await cUSDContract.methods\r\n        .approve(contractAddress, hairs[_index].price)\r\n        .send({ from: address });\r\n      await contract.methods.buyHair(_index).send({ from: address });\r\n      getHair();\r\n      getBalance();\r\n    } catch (error) {\r\n      console.log(error)\r\n    }};\r\n \r\n\r\n  const getHair = (async () => {\r\n    const hairsLength = await contract.methods.gethairsLength().call();\r\n    const _hairr = []\r\n    for (let index = 0; index < hairsLength; index++) {\r\n      console.log(hairsLength);\r\n      let _hairs = new Promise(async (resolve, reject) => {\r\n      let hair = await contract.methods.getHair(index).call();\r\n\r\n      resolve({\r\n        index: index,\r\n        owner: hair[0],\r\n        image: hair[1],\r\n        brand: hair[2],\r\n        color: hair[3],\r\n        durability: hair[4],\r\n        price: hair[5]\r\n\r\n                \r\n      });\r\n    });\r\n    _hairr.push(_hairs);\r\n  }\r\n\r\n  \r\n  const hairs = await Promise.all(_hairr);\r\n  setHairs(hairs);\r\n  console.log(hairs)\r\n});\r\n\r\nconst addHair = async (  _image, _brand, _color, _durabillity, price ) => {\r\n  const _price = new BigNumber(price).shiftedBy(ERC20_DECIMALS).toString();\r\n  try {\r\n    await contract.methods\r\n      .addHair(_image, _brand, _color, _durabillity, _price)\r\n      .send({ from: address });\r\n     getHair();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nconst changeHairImage = async (_index, _newImage) => {\r\n  console.log(_index);\r\n  try {\r\n    await contract.methods.replaceHairImage (_index, _newImage).send({ from: address });\r\n    getHair();\r\n    getBalance();\r\n  } catch (error) {\r\n   console.log(error);\r\n   alert(\"The hair image has been changed\")\r\n  }};\r\n   \r\n\r\n  return (\r\n    <div>\r\n      <Navbar balance = {cUSDBalance} />\r\n      <Hairs hairs ={hairs}\r\n      buyHair = {buyHair}\r\n      changeHairImage= {changeHairImage}\r\n       \r\n      />\r\n       <Newhairs addHair = {addHair}\r\n       \r\n/>\r\n    </div>\r\n    )\r\n\r\n\r\n}\r\nexport default App;","C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Hairs.js",["32"]," import React from \"react\";\r\n import { useState } from \"react\";\r\n \r\n\r\n\r\n \r\nconst Hairs = (props) => {\r\n    const [newImage, setnewImage] = useState('');\r\n    const submitHandler = (e) => {\r\n      e.preventDefault();}\r\n    return(\r\n        <div className=\"container\"> \r\n              <div className=\"row\">\r\n        {props.hairs.map((hair) =>(\r\n          <div className='col-4' key={hair.index}>  \r\n          \r\n          <div class=\"card\">\r\n          <img className=\"card-img-top\" src={hair.image} alt=\"img\"/>\r\n          <div class=\"card-body \">\r\n            <h5 class=\"card-title\">Brand : {hair.brand}</h5>\r\n            <h6 class=\"card-subtitle\">Color : {hair.color}</h6>\r\n            <h6 class=\"card-text\">Durability : {hair.durability}</h6>\r\n            <h5 class=\"card-title\">price : {hair.price / 1000000000000000000} cUSD</h5>\r\n            </div>\r\n\r\n            <div><button type=\"button\" class=\"btn tip btn-outline-dark\" onClick={() => props.buyHair(hair.index)}>Buy Hair</button></div>\r\n            <div class=\"form-group mx-sm-3 mb-2\">\r\n    <label for=\"Change Image\" class=\"sr-only\">Change Image</label>\r\n    <input type=\"text\" class=\"form-control\"  onChange={(e) => setnewImage(e.target.value)} id=\"Input new image\" placeholder=\"New Image\"/>\r\n  </div>\r\n  <button class=\"btn btn-dark mb-2\"  onClick={() => props.changeHairImage(hair.index, newImage)}>Change Image</button>\r\n            </div>\r\n            </div>\r\n            \r\n            \r\n        ))};\r\n            </div>\r\n            </div>\r\n            \r\n            \r\n      \r\n\r\n    )\r\n}\r\nexport default Hairs;","C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Haircentrics\\src\\components\\Newhairs.js",[],["33","34"],{"ruleId":"35","severity":1,"message":"36","line":4,"column":31,"nodeType":"37","messageId":"38","endLine":4,"endColumn":42},{"ruleId":"39","severity":1,"message":"40","line":65,"column":6,"nodeType":"41","endLine":65,"endColumn":20,"suggestions":"42"},{"ruleId":"39","severity":1,"message":"43","line":71,"column":6,"nodeType":"41","endLine":71,"endColumn":16,"suggestions":"44"},{"ruleId":"35","severity":1,"message":"45","line":9,"column":11,"nodeType":"37","messageId":"38","endLine":9,"endColumn":24},{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["50"],"React Hook useEffect has a missing dependency: 'getHair'. Either include it or remove the dependency array.",["51"],"'submitHandler' is assigned a value but never used.","no-native-reassign",["52"],"no-negated-in-lhs",["53"],{"desc":"54","fix":"55"},{"desc":"56","fix":"57"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: [kit, address, getBalance]",{"range":"58","text":"59"},"Update the dependencies array to be: [contract, getHair]",{"range":"60","text":"61"},[1641,1655],"[kit, address, getBalance]",[1733,1743],"[contract, getHair]"]